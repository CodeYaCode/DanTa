<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.snda.cloud.virtulization.resource.dao.local.ITableDao">
	<resultMap type="table" id="table">
		<result property="id" column="ID" />
		<result property="columnName" column="COLUMN_NAME" />
		<result property="value" column="VALUE" />
		<result property="nodeId" column="NODE_ID" />
		<result property="createTime" column="CREATE_TIME" />
		<result property="weight" column="WEIGHT" />
	</resultMap>
 	<select id="selectByDate" resultMap="table" parameterType="map" statementType="STATEMENT">
		SELECT
			*
		FROM
			${table}
		WHERE
			CREATE_TIME &gt; '${start}'
		AND
			CREATE_TIME &lt; '${end}'
		AND
			NODE = '${nodeName}'
		<if test="orderBy != null">
			ORDER BY WEIGHT
		</if>
		<if test="limit != null">
			LIMIT 0, 1
		</if>
	</select>
	
	<insert id="insertTodaysData" parameterType="table"  statementType="STATEMENT">
		INSERT INTO ${table}
		(
			 ID
			,COLUMN_NAME
			,VALUE
			,NODE
			,CREATE_TIME
			,WEIGHT
		)
		VALUE
		(
			 '${id}'
			,'${columnName}'
			,'${value}'
			,'${node}'
			, now()
			,'${weight}'
		)
	</insert>
</mapper>